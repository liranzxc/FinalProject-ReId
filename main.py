# -*- coding: utf-8 -*-
"""FinalProject.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1V5pgYFxuUwxiOg7D3zlqYixvA5FNf66K
"""

#
#

# install opencv

"""#Final Project - Source Target"""

# installing python opencv 3.4.2.16 for SIFT
#
# !pip uninstall opencv-python
# !pip uninstall opencv-contrib-python
#
#
# !pip install opencv-contrib-python==3.4.2.16
#
# using opencv
import cv2
from AlgoritamKeyPoints import *
from Matchers import *
from utils.imagesUtils import Accuracy, resizeImage, ShowMatch


def fullPipeLine(source, target):
    kp, des = KazeDetectKeyPoints(source)
    kpT, desT = KazeDetectKeyPoints(target)

    matches = KazeMatcher(des, desT)
    print(len(kp), len(des), len(kpT), len(desT), len(matches))
    print(Accuracy(kpT, matches))
    print(Accuracy(kp, matches))
    ShowMatch(source, kp, target, kpT, matches)


if __name__ == "__main__":
    """# import images"""

    source = cv2.imread('images/DSC_0054.JPG')

    target = cv2.imread('images/DSC_0102.JPG')

    target = resizeImage(target, 0.1)

    source = resizeImage(source, 0.1)

    fullPipeLine(source, target)

    print("finish")
